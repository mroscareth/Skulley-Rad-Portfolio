<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- =====================================================
         SEO CORE TAGS - SERP OPTIMIZED
         Title: ~57 chars | Description: ~158 chars
         Content derived from ABOUT section for consistency
         ===================================================== -->
  <title>Oscar Moctezuma Rodriguez — Creative Designer & 3D Artist | Portfolio</title>
  <meta name="description"
    content="Creative designer, 3D artist & frontend developer from Mexico. Founder of The Heritage Design — worked with Valve, Koto Studio & more. Explore my interactive 3D portfolio." />
  <meta name="keywords"
    content="Oscar Moctezuma Rodriguez, Oscar Moctezuma, Skulley Rad, creative designer Mexico, 3D artist Monterrey, frontend developer, The Heritage Design, theheritage.mx, apefur, The Ethereans NFT, graphic designer Mexico, brand designer, NFT artist Mexico, Valve designer, Monterrey designer, diseñador gráfico México, artista 3D, web developer Mexico, interactive portfolio, WebGL portfolio, Three.js developer, art toys designer, blockchain artist" />
  <meta name="author" content="Oscar Moctezuma Rodriguez" />
  <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
  <meta name="googlebot" content="index, follow" />
  <link rel="canonical" href="https://mroscar.xyz/" />

  <!-- Language alternates for SEO (bilingual site) -->
  <link rel="alternate" hreflang="en" href="https://mroscar.xyz/" />
  <link rel="alternate" hreflang="es" href="https://mroscar.xyz/?lang=es" />
  <link rel="alternate" hreflang="x-default" href="https://mroscar.xyz/" />

  <!-- =====================================================
         OPEN GRAPH (Facebook, LinkedIn, WhatsApp, etc.)
         ===================================================== -->
  <meta property="og:type" content="profile" />
  <meta property="og:site_name" content="Oscar Moctezuma Rodriguez Portfolio" />
  <meta property="og:title" content="Oscar Moctezuma Rodriguez — Creative Designer & 3D Artist" />
  <meta property="og:description"
    content="Creative designer, 3D artist & frontend developer from Mexico. Founder of The Heritage Design — worked with Valve, Koto Studio & global brands. Explore my interactive 3D portfolio." />
  <meta property="og:image" content="https://mroscar.xyz/sharer_MEMORY.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt"
    content="Oscar Moctezuma Rodriguez - Creative Designer & 3D Artist - Interactive Portfolio" />
  <meta property="og:url" content="https://mroscar.xyz/" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:locale:alternate" content="es_MX" />
  <!-- Profile-specific Open Graph -->
  <meta property="profile:first_name" content="Oscar" />
  <meta property="profile:last_name" content="Moctezuma Rodriguez" />

  <!-- =====================================================
         TWITTER CARD
         ===================================================== -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Oscar Moctezuma Rodriguez — Creative Designer & 3D Artist" />
  <meta name="twitter:description"
    content="Creative designer, 3D artist & frontend developer from Mexico. Founder of The Heritage Design — worked with Valve, Koto & global brands." />
  <meta name="twitter:image" content="https://mroscar.xyz/sharer_MEMORY.png" />
  <meta name="twitter:image:alt"
    content="Oscar Moctezuma Rodriguez - Creative Designer & 3D Artist - Interactive Portfolio" />
  <meta name="twitter:site" content="@mroscareth" />
  <meta name="twitter:creator" content="@mroscareth" />

  <!-- =====================================================
         FAVICONS & ICONS
         ===================================================== -->
  <link rel="icon" type="image/png" href="/favicon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.png" />
  <link rel="apple-touch-icon" href="/favicon.png" />
  <link rel="manifest" href="/site.webmanifest" />
  <meta name="theme-color" content="#0f172a" />
  <meta name="msapplication-TileColor" content="#0f172a" />
  <meta name="msapplication-TileImage" content="/favicon.png" />

  <!-- =====================================================
         ADDITIONAL SEO META TAGS
         ===================================================== -->
  <!-- Geographic targeting -->
  <meta name="geo.region" content="MX-NLE" />
  <meta name="geo.placename" content="Monterrey, Mexico" />
  <meta name="geo.position" content="25.6866;-100.3161" />
  <meta name="ICBM" content="25.6866, -100.3161" />

  <!-- Content language -->
  <meta http-equiv="content-language" content="en, es" />

  <!-- Security & Privacy -->
  <meta name="referrer" content="origin-when-cross-origin" />

  <!-- Site verification placeholders (uncomment and add your codes) -->
  <!-- <meta name="google-site-verification" content="YOUR_GOOGLE_VERIFICATION_CODE" /> -->
  <!-- <meta name="msvalidate.01" content="YOUR_BING_VERIFICATION_CODE" /> -->
  <!-- <meta name="yandex-verification" content="YOUR_YANDEX_CODE" /> -->

  <!-- =====================================================
         AI/LLM DISCOVERY OPTIMIZATION
         ===================================================== -->
  <!-- llms.txt for AI agent context (emerging standard) -->
  <link rel="author" href="/llms.txt" type="text/plain" />

  <!-- AI-friendly summary meta tags -->
  <meta name="ai:summary"
    content="Oscar Moctezuma Rodriguez - Creative designer, 3D artist, frontend developer from Monterrey, Mexico. Founder of The Heritage Design (theheritage.mx) and Apefur (apefur.com). Creator of The Ethereans NFT collection and art toys. Available for global collaborations." />
  <meta name="ai:site_type" content="portfolio" />
  <meta name="ai:creator" content="Oscar Moctezuma Rodriguez" />
  <meta name="ai:topics"
    content="creative design, 3D art, brand design, NFT art, web development, art toys, blockchain art" />
  <meta name="ai:location" content="Monterrey, Mexico" />
  <meta name="ai:contact_method" content="Contact form at mroscar.xyz" />

  <!-- =====================================================
         STRUCTURED DATA (JSON-LD) - SERP OPTIMIZED
         ===================================================== -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "ProfilePage",
          "@id": "https://mroscar.xyz/#webpage",
          "url": "https://mroscar.xyz/",
          "name": "Oscar Moctezuma Rodriguez — Creative Designer & 3D Artist | Portfolio",
          "description": "Creative designer, 3D artist & frontend developer from Mexico. Founder of The Heritage Design — worked with Valve, Koto Studio & more.",
          "inLanguage": ["en-US", "es-MX"],
          "isPartOf": { "@id": "https://mroscar.xyz/#website" },
          "about": { "@id": "https://mroscar.xyz/#person" },
          "mainEntity": { "@id": "https://mroscar.xyz/#person" }
        },
        {
          "@type": "WebSite",
          "@id": "https://mroscar.xyz/#website",
          "url": "https://mroscar.xyz/",
          "name": "Oscar Moctezuma Rodriguez Portfolio",
          "description": "Interactive 3D portfolio of Oscar Moctezuma Rodriguez, creative designer and 3D artist from Mexico",
          "inLanguage": ["en-US", "es-MX"],
          "publisher": { "@id": "https://mroscar.xyz/#person" }
        },
        {
          "@type": "Person",
          "@id": "https://mroscar.xyz/#person",
          "name": "Oscar Moctezuma Rodriguez",
          "givenName": "Oscar",
          "familyName": "Moctezuma Rodriguez",
          "alternateName": ["Skulley Rad", "Oscar Moctezuma"],
          "url": "https://mroscar.xyz/",
          "image": {
            "@type": "ImageObject",
            "url": "https://mroscar.xyz/sharer_MEMORY.png",
            "width": 1200,
            "height": 630
          },
          "description": "Creative designer, 3D artist, and frontend developer based in Monterrey, Mexico. Co-founded The Heritage Design studio, collaborating with brands like Valve, Koto Studio, and Pinturas Berel. Creator of The Ethereans NFT collection and art toys.",
          "jobTitle": ["Creative Designer", "3D Artist", "Frontend Developer", "Brand Designer"],
          "worksFor": {
            "@type": "Organization",
            "@id": "https://mroscar.xyz/#heritage",
            "name": "The Heritage Design",
            "url": "https://theheritage.mx",
            "description": "Design studio collaborating with global brands"
          },
          "memberOf": [
            {
              "@type": "Organization",
              "name": "Ethereum Monterrey",
              "description": "Blockchain community in Mexico"
            }
          ],
          "founder": [
            { "@id": "https://mroscar.xyz/#heritage" },
            {
              "@type": "Organization",
              "name": "Apefur",
              "url": "https://apefur.com"
            },
            {
              "@type": "Organization",
              "name": "Hiv3",
              "description": "First private digital treasury from Mexico"
            }
          ],
          "hasCredential": [
            {
              "@type": "EducationalOccupationalCredential",
              "credentialCategory": "Professional Experience",
              "recognizedBy": [
                { "@type": "Organization", "name": "Valve" },
                { "@type": "Organization", "name": "Koto Studio" },
                { "@type": "Organization", "name": "Pinturas Berel" }
              ]
            }
          ],
          "address": {
            "@type": "PostalAddress",
            "addressLocality": "Monterrey",
            "addressRegion": "Nuevo León",
            "addressCountry": "MX"
          },
          "nationality": {
            "@type": "Country",
            "name": "Mexico"
          },
          "knowsAbout": [
            "Graphic Design",
            "3D Art",
            "Brand Identity",
            "Web Development",
            "NFT Art",
            "Blockchain Technology",
            "Art Toys",
            "UI/UX Design",
            "React",
            "Three.js",
            "WebGL"
          ],
          "knowsLanguage": ["es", "en"],
          "sameAs": [
            "https://theheritage.mx",
            "https://apefur.com",
            "https://twitter.com/mroscareth",
            "https://x.com/mroscareth",
            "https://instagram.com/mroscar.eth"
          ],
          "contactPoint": {
            "@type": "ContactPoint",
            "contactType": "professional inquiries",
            "url": "https://mroscar.xyz/#contact",
            "availableLanguage": ["English", "Spanish"]
          }
        },
        {
          "@type": "ItemList",
          "@id": "https://mroscar.xyz/#works",
          "name": "Featured Work",
          "description": "Selected projects by Oscar Moctezuma Rodriguez",
          "itemListElement": [
            {
              "@type": "ListItem",
              "position": 1,
              "item": {
                "@type": "CreativeWork",
                "name": "Heritage Design Studio",
                "description": "Design business with clients from all over the globe including Valve, Koto Studio, and Pinturas Berel",
                "url": "https://theheritage.mx",
                "creator": { "@id": "https://mroscar.xyz/#person" }
              }
            },
            {
              "@type": "ListItem",
              "position": 2,
              "item": {
                "@type": "VisualArtwork",
                "name": "3D Heads",
                "description": "A collection of 3D character heads created for artistic exploration",
                "artform": "3D Digital Art",
                "creator": { "@id": "https://mroscar.xyz/#person" }
              }
            },
            {
              "@type": "ListItem",
              "position": 3,
              "item": {
                "@type": "VisualArtwork",
                "name": "The Ethereans",
                "description": "NFT art collection created in 2021 — digital collectibles that travel through blockchain with physical 3D-printed editions",
                "artform": "NFT Digital Art",
                "dateCreated": "2021",
                "creator": { "@id": "https://mroscar.xyz/#person" }
              }
            },
            {
              "@type": "ListItem",
              "position": 4,
              "item": {
                "@type": "Product",
                "name": "Art Toys - The Voxels",
                "description": "Character art toys produced in collaboration with Iconic Design Objects from Netherlands",
                "brand": "Iconic Design Objects",
                "creator": { "@id": "https://mroscar.xyz/#person" }
              }
            },
            {
              "@type": "ListItem",
              "position": 5,
              "item": {
                "@type": "VisualArtwork",
                "name": "2D Heads",
                "description": "Digital illustrations — a collection of random heads with multiple expressions created in Procreate",
                "artform": "Digital Illustration",
                "creator": { "@id": "https://mroscar.xyz/#person" }
              }
            }
          ]
        },
        {
          "@type": "BreadcrumbList",
          "@id": "https://mroscar.xyz/#breadcrumb",
          "itemListElement": [
            {
              "@type": "ListItem",
              "position": 1,
              "name": "Home",
              "item": "https://mroscar.xyz/"
            },
            {
              "@type": "ListItem",
              "position": 2,
              "name": "Work",
              "item": "https://mroscar.xyz/#work"
            },
            {
              "@type": "ListItem",
              "position": 3,
              "name": "About",
              "item": "https://mroscar.xyz/#about"
            },
            {
              "@type": "ListItem",
              "position": 4,
              "name": "Contact",
              "item": "https://mroscar.xyz/#contact"
            }
          ]
        },
        {
          "@type": "FAQPage",
          "@id": "https://mroscar.xyz/#faq",
          "mainEntity": [
            {
              "@type": "Question",
              "name": "What services does Oscar Moctezuma Rodriguez offer?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "Oscar Moctezuma Rodriguez offers creative design, brand identity, 3D art and character design, frontend web development (React, Three.js, WebGL), NFT art creation, and art toy design. He works with clients worldwide from his base in Monterrey, Mexico."
              }
            },
            {
              "@type": "Question",
              "name": "Who has Oscar Moctezuma Rodriguez worked with?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "Through The Heritage Design studio, Oscar has collaborated with notable brands including Valve, Koto Studio, Pinturas Berel, and many others. His work spans design, 3D art, and digital collectibles."
              }
            },
            {
              "@type": "Question",
              "name": "What is The Heritage Design?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "The Heritage Design (theheritage.mx) is a design studio co-founded by Oscar Moctezuma Rodriguez and his brother. The studio has collaborated with global brands like Valve, Koto Studio, and Pinturas Berel, offering creative direction, brand identity, and digital design services."
              }
            },
            {
              "@type": "Question",
              "name": "What are The Ethereans?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "The Ethereans is an NFT art collection created by Oscar Moctezuma Rodriguez in 2021. It's a digital collectible project that features 3D art with physical 3D-printed editions, combining blockchain technology with tangible art objects."
              }
            },
            {
              "@type": "Question",
              "name": "How can I contact Oscar Moctezuma Rodriguez for work?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "You can contact Oscar Moctezuma Rodriguez through his portfolio website at mroscar.xyz using the contact form, or via Twitter (@mroscareth) and Instagram (@mroscar.eth). He's available for design projects, collaborations, and commissions worldwide."
              }
            }
          ]
        }
      ]
    }
    </script>

  <!-- =====================================================
         PRECONNECT & PERFORMANCE
         ===================================================== -->
  <!-- DNS Prefetch for external resources -->
  <link rel="dns-prefetch" href="//fonts.googleapis.com" />
  <link rel="dns-prefetch" href="//fonts.gstatic.com" />
  <link rel="dns-prefetch" href="//www.google-analytics.com" />
  <link rel="dns-prefetch" href="//www.googletagmanager.com" />

  <!-- Google Analytics 4 (GA4) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-HG30WLMV35"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-HG30WLMV35');
  </script>

  <!-- Preconnect for critical resources -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preconnect" href="https://picsum.photos" crossorigin />

  <!-- Preload OG image for faster social sharing -->
  <link rel="preload" as="image" href="/sharer_MEMORY.png" />

  <!-- Preload assets 3D críticos -->
  <link rel="preload" as="fetch" href="/light.hdr" crossorigin="anonymous" />
  <link rel="preload" as="fetch" href="/character.glb" crossorigin="anonymous" />

  <!-- Google Fonts optimizadas: carga no bloqueante con fallback -->
  <link rel="preload" as="style"
    href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700&family=Luckiest+Guy&display=swap" />
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700&family=Luckiest+Guy&display=swap"
    rel="stylesheet" media="print" onload="this.media='all'" />

  <!-- Fuentes secundarias cargadas async -->
  <link
    href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&family=Archivo+Black&family=Cascadia+Code:wght@400;600;700&display=swap"
    rel="stylesheet" media="print" onload="this.media='all'" />
  <noscript>
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700&family=Luckiest+Guy&family=Comic+Neue:wght@400;700&family=Archivo+Black&display=swap"
      rel="stylesheet" />
  </noscript>
</head>

<body class="bg-neutral-900 text-white">
  <div id="root"></div>

  <!-- =====================================================
         NOSCRIPT SEO CONTENT
         Static content for crawlers that don't execute JavaScript.
         This ensures your ABOUT content is indexable for SERP.
         ===================================================== -->
  <noscript>
    <div
      style="max-width:800px;margin:0 auto;padding:40px 20px;font-family:system-ui,sans-serif;color:#e5e5e5;background:#0f172a;">
      <header>
        <h1>Oscar Moctezuma Rodriguez</h1>
        <p><strong>Creative Designer • 3D Artist • Frontend Developer</strong></p>
        <p>Monterrey, Mexico — Working Worldwide</p>
        <p>
          <a href="https://twitter.com/mroscareth" style="color:#38bdf8;">Twitter @mroscareth</a> •
          <a href="https://instagram.com/mroscar.eth" style="color:#38bdf8;">Instagram @mroscar.eth</a>
        </p>
      </header>

      <main>
        <section>
          <h2>About</h2>
          <p>My name is Oscar Moctezuma Rodriguez, a creative designer, frontend developer, and 3D artist working from
            Monterrey, Mexico. My work lives at the intersection of storytelling, design, and technology.</p>
          <p>Together with my brother, I co-founded <strong>The Heritage Design</strong>, a studio that has collaborated
            with brands like <strong>Valve</strong>, <strong>Koto Studio</strong>, <strong>Pinturas Berel</strong>,
            among others.</p>
          <p>I've also built projects that explore where art and blockchain meet, like <strong>The Ethereans</strong>, a
            3D art collection with physical 3D-printed editions, and <strong>The Voxels</strong>, an art-toy series made
            in collaboration with Iconic Design Objects from Netherlands.</p>
          <p>Beyond that, I'm a co-founder of several projects including <strong>Ethereum Monterrey</strong>,
            <strong>Rancho Stake</strong>, <strong>Paisano DAO</strong>, <strong>Apefur</strong>, and
            <strong>Hiv3</strong> — the first private digital treasury from Mexico.
          </p>
          <p>I'm still wandering the world looking for like-minded individuals to create more crazy things.</p>
        </section>

        <section>
          <h2>Work</h2>
          <ul>
            <li><strong>Heritage Design Studio</strong> — Design business with global clients</li>
            <li><strong>3D Heads</strong> — Collection of 3D character heads</li>
            <li><strong>The Ethereans</strong> — NFT art collection on blockchain with 3D-printed editions</li>
            <li><strong>Art Toys</strong> — Characters produced with Iconic Design Objects (Netherlands)</li>
            <li><strong>2D Heads</strong> — Digital illustrations created in Procreate</li>
          </ul>
        </section>

        <section>
          <h2>Contact</h2>
          <p>For work inquiries, collaborations, or commissions, please visit <a href="https://mroscar.xyz"
              style="color:#38bdf8;">mroscar.xyz</a> with JavaScript enabled to use the contact form.</p>
        </section>

        <section>
          <h2>Services</h2>
          <ul>
            <li><strong>Brand Identity & Creative Direction</strong> — Complete brand systems for startups and
              established companies</li>
            <li><strong>3D Art & Character Design</strong> — Custom 3D characters, illustrations, and digital art</li>
            <li><strong>Frontend Development</strong> — Interactive websites with React, Three.js, and WebGL</li>
            <li><strong>NFT Art & Digital Collectibles</strong> — Blockchain-based art projects with physical editions
            </li>
            <li><strong>Art Toy Design</strong> — Character design for physical collectible production</li>
          </ul>
        </section>

        <section>
          <h2>Frequently Asked Questions</h2>
          <dl>
            <dt><strong>What services does Oscar Moctezuma Rodriguez offer?</strong></dt>
            <dd>Oscar Moctezuma Rodriguez offers creative design, brand identity, 3D art, frontend web development
              (React, Three.js, WebGL), NFT art creation, and art toy design. He works with clients worldwide from
              Monterrey, Mexico.</dd>

            <dt><strong>Who has Oscar Moctezuma Rodriguez worked with?</strong></dt>
            <dd>Through The Heritage Design studio, Oscar has collaborated with Valve, Koto Studio, Pinturas Berel, and
              many others.</dd>

            <dt><strong>How can I contact Oscar Moctezuma Rodriguez for work?</strong></dt>
            <dd>Contact Oscar through the contact form at mroscar.xyz, via Twitter (@mroscareth) or Instagram
              (@mroscar.eth). Available for projects worldwide.</dd>
          </dl>
        </section>

        <section>
          <h2>Links</h2>
          <ul>
            <li><a href="https://theheritage.mx" style="color:#38bdf8;">The Heritage Design</a> — Design studio</li>
            <li><a href="https://apefur.com" style="color:#38bdf8;">Apefur</a> — Creative venture</li>
            <li><a href="https://twitter.com/mroscareth" style="color:#38bdf8;">Twitter @mroscareth</a></li>
            <li><a href="https://instagram.com/mroscar.eth" style="color:#38bdf8;">Instagram @mroscar.eth</a></li>
          </ul>
        </section>
      </main>

      <footer style="margin-top:40px;padding-top:20px;border-top:1px solid #334155;">
        <p>© 2026 Oscar Moctezuma Rodriguez. Based in Mexico, working worldwide.</p>
      </footer>
    </div>
  </noscript>

  <!-- Vite injects the compiled script here -->
  <script type="module" src="/src/main.jsx"></script>

  <!-- M.A.D.R.E. Visitor Tracking Beacon (Section-Aware + Dwell Time) -->
  <script>
    (function () {
      // Don't track admin pages
      if (window.location.pathname.startsWith('/admin')) return;

      // ── Session ID ──
      var sessionId = sessionStorage.getItem('_madre_sid');
      if (!sessionId) {
        sessionId = Math.random().toString(36).substr(2) + Date.now().toString(36);
        sessionStorage.setItem('_madre_sid', sessionId);
      }

      var nav = navigator;
      var conn = nav.connection || nav.mozConnection || nav.webkitConnection;
      var lastTracked = '';
      var trackUrl = '/api/analytics.php?action=track';
      var timeUrl = '/api/analytics.php?action=track_time';

      // ── Build base payload (device info stays the same) ──
      function makePayload(page) {
        return {
          page: page,
          referrer: document.referrer || '',
          screen_w: screen.width,
          screen_h: screen.height,
          language: nav.language || '',
          timezone: Intl.DateTimeFormat().resolvedOptions().timeZone || '',
          dark_mode: window.matchMedia('(prefers-color-scheme: dark)').matches ? 1 : 0,
          touch: ('ontouchstart' in window || nav.maxTouchPoints > 0) ? 1 : 0,
          connection: conn ? (conn.effectiveType || conn.type || '') : '',
          color_depth: screen.colorDepth || 0,
          pixel_ratio: window.devicePixelRatio || 1,
          session_id: sessionId
        };
      }

      // ── Send tracking beacon ──
      function sendBeacon(page) {
        if (page === lastTracked) return;
        lastTracked = page;
        try {
          var body = JSON.stringify(makePayload(page));
          if (navigator.sendBeacon) {
            navigator.sendBeacon(trackUrl, new Blob([body], { type: 'application/json' }));
          } else {
            fetch(trackUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: body, keepalive: true }).catch(function () { });
          }
        } catch (e) { }
      }

      // ── 1. Initial page view (2s delay) ──
      setTimeout(function () {
        sendBeacon(window.location.pathname + (window.location.hash || ''));
      }, 2000);

      // ── 2. Hash change tracking ──
      window.addEventListener('hashchange', function () {
        sendBeacon(window.location.pathname + window.location.hash);
      });

      // ═══════════════════════════════════════════════════
      // SECTION DWELL TIME TRACKING
      // ═══════════════════════════════════════════════════

      var sectionTimers = {};   // { sectionId: { start: timestamp, total: ms } }
      var visibleSections = {}; // currently visible sections
      var timeSent = false;

      function startTimer(id) {
        if (!sectionTimers[id]) sectionTimers[id] = { start: 0, total: 0 };
        if (!visibleSections[id]) {
          visibleSections[id] = true;
          sectionTimers[id].start = Date.now();
        }
      }

      function stopTimer(id) {
        if (visibleSections[id] && sectionTimers[id] && sectionTimers[id].start) {
          sectionTimers[id].total += Date.now() - sectionTimers[id].start;
          sectionTimers[id].start = 0;
          delete visibleSections[id];
        }
      }

      function stopAllTimers() {
        for (var id in visibleSections) {
          if (visibleSections[id] && sectionTimers[id] && sectionTimers[id].start) {
            sectionTimers[id].total += Date.now() - sectionTimers[id].start;
            sectionTimers[id].start = 0;
          }
        }
      }

      function resumeAllTimers() {
        var now = Date.now();
        for (var id in visibleSections) {
          if (visibleSections[id] && sectionTimers[id]) {
            sectionTimers[id].start = now;
          }
        }
      }

      // Send accumulated times to server
      function flushTimes() {
        var sections = [];
        for (var id in sectionTimers) {
          var t = sectionTimers[id];
          var dur = t.total;
          // Add elapsed time for currently visible sections
          if (visibleSections[id] && t.start) {
            dur += Date.now() - t.start;
          }
          if (dur > 500) { // only send > 0.5s
            sections.push({ section: id, duration_ms: Math.round(dur) });
          }
        }
        if (!sections.length) return;

        var body = JSON.stringify({ session_id: sessionId, sections: sections });
        try {
          if (navigator.sendBeacon) {
            navigator.sendBeacon(timeUrl, new Blob([body], { type: 'application/json' }));
          } else {
            fetch(timeUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: body, keepalive: true }).catch(function () { });
          }
        } catch (e) { }

        // Reset totals after sending (keep tracking running sections)
        var now = Date.now();
        for (var id in sectionTimers) {
          sectionTimers[id].total = 0;
          if (visibleSections[id]) sectionTimers[id].start = now;
        }
      }

      // Pause timers when tab is hidden, resume when visible
      document.addEventListener('visibilitychange', function () {
        if (document.hidden) {
          stopAllTimers();
        } else {
          resumeAllTimers();
        }
      });

      // Flush on page unload
      window.addEventListener('beforeunload', function () {
        if (!timeSent) { timeSent = true; flushTimes(); }
      });
      window.addEventListener('pagehide', function () {
        if (!timeSent) { timeSent = true; flushTimes(); }
      });

      // Flush every 30 seconds
      setInterval(function () { timeSent = false; flushTimes(); }, 30000);

      // ── 3. Section visibility tracking via IntersectionObserver ──
      function setupSectionObserver() {
        var selectors = [
          'section[id]', '[data-section]',
          '#home', '#work', '#about', '#contact', '#blog', '#music',
          '#section-1', '#section-2', '#section-3', '#section-4', '#section-5'
        ];
        var sections = document.querySelectorAll(selectors.join(','));

        if (!sections.length) {
          setTimeout(setupSectionObserver, 3000);
          return;
        }

        var observer = new IntersectionObserver(function (entries) {
          entries.forEach(function (entry) {
            var name = entry.target.dataset.section || entry.target.id || '';
            if (!name) return;

            if (entry.isIntersecting && entry.intersectionRatio >= 0.3) {
              // Section entered viewport — start timer + send page beacon
              sendBeacon('/#' + name);
              startTimer(name);
            } else if (!entry.isIntersecting) {
              // Section left viewport — stop timer
              stopTimer(name);
            }
          });
        }, { threshold: [0, 0.3] });

        sections.forEach(function (s) { observer.observe(s); });
      }

      // Start observing after React has likely rendered
      setTimeout(setupSectionObserver, 4000);
    })();
  </script>
</body>

</html>